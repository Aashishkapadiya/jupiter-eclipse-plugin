<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>
  <!-- To set source path to class path, search "build configuration" in help -->
    <!-- Instantiates ReviewPlugin when workbench starts up -->
  <extension point="org.eclipse.ui.startup"></extension>
  <!-- Registers Code Review Editor table -->
  <extension point="org.eclipse.ui.views">
    <category
        name="%categoryName"
        id="csdl.jupiter.ui.views">
    </category>
    <view
        name="%viewName"
        icon="lib/icons/jupiter.gif"
        category="csdl.jupiter.ui.views"
        class="csdl.jupiter.ui.view.table.ReviewTableView"
        id="csdl.jupiter.ui.view.table">
    </view>
    <view
        name="%editorName"
        icon="lib/icons/jupiter.gif"
        category="csdl.jupiter.ui.views"
        class="csdl.jupiter.ui.view.editor.ReviewEditorView"
        id="csdl.jupiter.ui.view.editor">
    </view>
  </extension>
  <extension point="org.eclipse.ui.popupMenus">
    <!-- Registers code review action to the menu of CompilationUnit which can be seen in Java perspective. -->
    <objectContribution
        objectClass="org.eclipse.jdt.core.ICompilationUnit"
        id="csdl.jupiter.ui.action.contribution.popup.objectICompilationUnit">
      <filter
          name="projectNature"
          value="org.eclipse.jdt.core.javanature"></filter>
      <action
          label="%actionLabel"
          icon="lib/icons/jupiter.gif"
          helpContextId="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          class="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          menubarPath="add"
          enablesFor="1"
          id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"></action>
    </objectContribution>
    <!-- Registers code review action to the IMember which gives the menu in a class.-->
    <objectContribution
        objectClass="org.eclipse.jdt.core.IMember"
        id="csdl.jupiter.ui.action.contribution.popup.member.objectICompilationUnit">
      <action
          label="%actionLabel"
          icon="lib/icons/jupiter.gif"
          helpContextId="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          class="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          menubarPath="add"
          enablesFor="1"
          id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      </action>
    </objectContribution>
    <!-- Registers code review action to the menu of IFile which can be seen in Resource perspective. -->
    <objectContribution 
        id="csdl.jupiter.action.contribution.popup.objectIFile"
        objectClass="org.eclipse.core.resources.IFile">
      <action
          id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate" 
          label="%actionLabel"
          icon="lib/icons/jupiter.gif"
          helpContextId="csdl.jupiter.ui.action.ReviewAdditionActionDelegate" 
          menubarPath="csdl.jupiter.ui.action.ReviewAdditionActionDelegate" 
          class="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          enablesFor="1">
      </action>
    </objectContribution>
    <!-- Registers to the context menu of the text editor.-->
    <viewerContribution
        targetID="#TextEditorContext"
        id="csdl.jupiter.ui.action.contribution.popup.texteditor">
      <action
          id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate" 
          label="%actionLabel"
          icon="lib/icons/jupiter.gif"
          helpContextId="csdl.jupiter.ui.action.ReviewAdditionActionDelegate" 
          menubarPath="additions" 
          class="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      </action>
    </viewerContribution>
    <!-- Registers to the ruler menu of the text editor.-->
	  <viewerContribution 
		    targetID="#TextRulerContext"
        id="csdl.jupiter.ui.action.contribution.popup.texteditor">
         <action
               label="%actionLabel"
               icon="lib/icons/jupiter.gif"
               helpContextId="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
               class="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
               menubarPath="additions"
               id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
         </action>
  	</viewerContribution>
    <!-- Registers to the context menu of the compilation unit editor.-->
    <viewerContribution
        targetID="#CompilationUnitEditorContext"
        id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      <action
          label="%actionLabel"
          icon="lib/icons/jupiter.gif"
          helpContextId="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          class="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          menubarPath="additions"
          id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      </action>
    </viewerContribution>
    <!-- Registers to the ruler menu of the compilation unit editor.-->
    <viewerContribution
        targetID="#CompilationUnitRulerContext"
        id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      <action
          label="%actionLabel"
          icon="lib/icons/jupiter.gif"
          helpContextId="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          class="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          menubarPath="add"
          id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      </action>
    </viewerContribution>
    <!-- Registers to the context menu of the c editor.-->
    <viewerContribution
        targetID="#CEditorContext"
        id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      <action
          label="%actionLabel"
          icon="lib/icons/jupiter.gif"
          helpContextId="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          class="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          menubarPath="additions"
          id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      </action>
    </viewerContribution>
    <!-- Registers to the ruler menu of the c editor.-->
    <viewerContribution
        targetID="#CEditorRulerContext"
        id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      <action
          label="%actionLabel"
          icon="lib/icons/jupiter.gif"
          helpContextId="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          class="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          menubarPath="add"
          id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      </action>
    </viewerContribution>
    <!-- Registers to the context menu of the assembly editor.-->
    <viewerContribution
        targetID="#ASMEditorContext"
        id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      <action
          label="%actionLabel"
          icon="lib/icons/jupiter.gif"
          helpContextId="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          class="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          menubarPath="additions"
          id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      </action>
    </viewerContribution>
    <!-- Registers to the ruler menu of the assembly editor.-->
    <viewerContribution
        targetID="#ASMEditorRulerContext"
        id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      <action
          label="%actionLabel"
          icon="lib/icons/jupiter.gif"
          helpContextId="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          class="csdl.jupiter.ui.action.ReviewAdditionActionDelegate"
          menubarPath="add"
          id="csdl.jupiter.ui.action.ReviewAdditionActionDelegate">
      </action>
    </viewerContribution>
  </extension>
  <!-- Preferences -->
  <extension point="org.eclipse.ui.preferencePages">
    <page
        name="%pageNameGeneral"
        class="csdl.jupiter.ui.preference.GeneralPreferencePage"
        id="csdl.jupiter.ui.preference.GeneralPreferencePage">
    </page>
    <page
        name="%pageNameFilter"
        category="csdl.jupiter.ui.preference.GeneralPreferencePage"
        class="csdl.jupiter.ui.preference.FilterPreferencePage"
        id="csdl.jupiter.ui.preference.FilterPreferencePage">
    </page>
    <page
        name="%pageNameView"
        category="csdl.jupiter.ui.preference.GeneralPreferencePage"
        class="csdl.jupiter.ui.preference.ViewPreferencePage"
        id="csdl.jupiter.ui.preference.ViewPreferencePage">
    </page>
  </extension>
  <!-- Resgisters actions to the workbench window bar. -->
  <extension point="org.eclipse.ui.actionSets">
    <actionSet
        label="%actionSetLabel"
        visible="true"
        id="csdl.jupiter.ui.action.PhaseSelectionActionDelegate">
      <action
          label="%actionSetActionLabel"
          icon="lib/icons/jupiter.gif"
          class="csdl.jupiter.ui.action.PhaseSelectionActionDelegate"
          tooltip="%actionSetActionToolTip"
          toolbarPath="Normal/additions"
          pulldown="true"
          id="csdl.jupiter.ui.action.PhaseSelectionActionDelegate">
      </action>
    </actionSet>
  </extension>
  <extension point="org.eclipse.ui.propertyPages">
    <page
        adaptable="true"
        objectClass="org.eclipse.core.resources.IProject"
        name="%propertyName"
        class="csdl.jupiter.ui.property.ReviewPropertyPage"
        id="csdl.jupiter.ui.property.ReviewPropertyPage">
    </page>
  </extension>
  <extension point="org.eclipse.ui.perspectives">
    <perspective name="%perspectiveName"
        icon="lib/icons/jupiter.gif"
        class="csdl.jupiter.ui.perspective.ReviewPerspectiveFactory"
        id="csdl.jupiter.ui.perspective">
    </perspective>
  </extension>
  <extension point="org.eclipse.ui.perspectiveExtensions">
    <perspectiveExtension targetID="csdl.jupiter.ui.perspective">
      <perspectiveShortcut id="org.eclipse.jdt.ui.JavaPerspective"/>
      <perspectiveShortcut id="org.eclipse.ui.resourcePerspective"/>
      <perspectiveShortcut id="org.eclipse.jdt.ui.JavaBrowsingPerspective"/>
      <perspectiveShortcut id="org.eclipse.debug.ui.DebugPerspective"/>
      <newWizardShortcut id="org.eclipse.jdt.ui.wizards.NewPackageCreationWizard"/>
      <newWizardShortcut id="org.eclipse.jdt.ui.wizards.NewClassCreationWizard"/>
      <newWizardShortcut id="org.eclipse.jdt.ui.wizards.NewInterfaceCreationWizard"/>
      <newWizardShortcut id="org.eclipse.jdt.ui.wizards.NewSourceFolderCreationWizard"/>
      <newWizardShortcut id="org.eclipse.ui.wizards.new.folder"/>
      <newWizardShortcut id="org.eclipse.ui.wizards.new.file"/>
      <newWizardShortcut id="org.eclipse.jdt.ui.wizards.JavaProjectWizard"/>
      <viewShortcut id="org.eclipse.ui.views.ResourceNavigator"/>
      <viewShortcut id="org.eclipse.ui.views.ContentOutline"/>
      <viewShortcut id="org.eclipse.ui.views.ProblemView"/>
      <viewShortcut id="org.eclipse.jdt.ui.PackageExplorer"/>
      <viewShortcut id="org.eclipse.pde.runtime.LogView"/>
      <viewShortcut id="csdl.jupiter.ui.view"/>
    </perspectiveExtension>
    <perspectiveExtension targetID="org.eclipse.ui.resourcePerspective">
      <perspectiveShortcut id="csdl.jupiter.ui.perspective"/>
    </perspectiveExtension>
    <perspectiveExtension targetID="org.eclipse.jdt.ui.JavaPerspective">
      <perspectiveShortcut id="csdl.jupiter.ui.perspective"/>
    </perspectiveExtension>
    <perspectiveExtension targetID="org.eclipse.pde.ui.PDEPerspective">
      <perspectiveShortcut id="csdl.jupiter.ui.perspective"/>
    </perspectiveExtension>
    <perspectiveExtension targetID="org.eclipse.jdt.ui.JavaBrowsingPerspective">
      <perspectiveShortcut id="csdl.jupiter.ui.perspective"/>
    </perspectiveExtension>
    <perspectiveExtension targetID="org.eclipse.jdt.ui.JavaHierarchyPerspective">
      <perspectiveShortcut id="csdl.jupiter.ui.perspective"/>
    </perspectiveExtension>
    <perspectiveExtension targetID="org.eclipse.debug.ui.DebugPerspective">
      <perspectiveShortcut id="csdl.jupiter.ui.perspective"/>
    </perspectiveExtension>
  </extension>
  <extension point="org.eclipse.core.resources.markers"
             id="reviewmarker"
             name="%reviewMakerName">
      <super type="org.eclipse.core.resources.textmarker" />
      <persistent value="false" />
      <attribute name="issueId" />     
      <attribute name="summary" />
      <attribute name="description" />
      <attribute name="message" />
   </extension>
   <extension point="org.eclipse.ui.ide.markerImageProviders">
      <imageprovider id="csdl.jupiter.reviewMarkerProvider"
            markertype="csdl.jupiter.reviewmarker"
            icon="lib/icons/review_marker.gif">
      </imageprovider>
   </extension>
   <extension point="org.eclipse.ui.editors.annotationTypes">
      <type name="csdl.jupiter.texteditor.review"
         markerType="csdl.jupiter.reviewmarker">
      </type>
   </extension>
   <extension point="org.eclipse.ui.editors.markerAnnotationSpecification">
     <specification
            annotationType="csdl.jupiter.texteditor.review"
            label="%reviewSpecificationLabel"
            textPreferenceKey="reviewIndication"
            textPreferenceValue="false"
            highlightPreferenceKey="reviewIndicationHighlighting"
            highlightPreferenceValue="false"
            contributesToHeader="true"
            overviewRulerPreferenceKey="reviewIndicationInOverviewRuler"
            overviewRulerPreferenceValue="true"
            verticalRulerPreferenceKey="reviewIndicationInVerticalRuler"
            verticalRulerPreferenceValue="true"
            colorPreferenceKey="reviewIndicationColor"
            colorPreferenceValue="200,72,255"
            presentationLayer="1"
            showInNextPrevDropdownToolbarActionKey="showReviewInNextPrevDropdownToolbarAction"
            showInNextPrevDropdownToolbarAction="true"
            isGoToNextNavigationTargetKey="isReviewGoToNextNavigationTarget"
            isGoToNextNavigationTarget="true"
            isGoToPreviousNavigationTargetKey="isReviewGoToPreviousNavigationTarget"
            isGoToPreviousNavigationTarget="true">
      </specification>
   </extension>
   <extension point="org.eclipse.ui.ide.markerResolution">
     <markerResolutionGenerator markerType="csdl.jupiter.reviewmarker"
		                       class="csdl.jupiter.ui.marker.ReviewMarkerResolutionGenerator">
     </markerResolutionGenerator>
   </extension>
   <!-- Define review file type -->
   <extension point="org.eclipse.team.core.fileTypes">
      <fileTypes
            type="text"
            extension="review">
      </fileTypes>
      <fileTypes
            type="text"
            extension="jupiter">
      </fileTypes>
   </extension>
</plugin>
